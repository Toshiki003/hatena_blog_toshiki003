---
Title: 【Git】わかばちゃんの記事を読み通した学習メモ
Date: 2024-01-03T04:28:41+09:00
URL: https://kashimono.hatenablog.com/entry/2024/01/03/042841
EditURL: https://blog.hatena.ne.jp/kashimono/kashimono.hatenablog.com/atom/entry/6801883189071859313
---

# はじめに

Git操作にだいぶ慣れたとはいえ、コンフリクトが怖かったりresetのオプションってどうだったっけ？とその都度調べたりと不安なところがありました。

なので、初心に戻って[わかばちゃんの連載記事](https://www.r-staffing.co.jp/engineer/entry/20190621_1)から理解が曖昧だった点を中心にアウトプットしたいと思います。


# 内容

### GItオブジェクト（の中のコミットオブジェクト）

- ブランチの正体とは「コミットIDを指し示すポインタ」。

**コミットオブジェクト（コミットによって生成されたデータのこと）👈コミットID👈ブランチ名（developなど）**

- コミットオブジェクトを見るには、```git cat-file -p <コミットID>```で確認できる

- 例えば、以下。

```
$ git cat-file -p 90324d9a01cc57aa1c544fdfa844a520f121c5f3

tree 2868ec57b012ed2ae7e4440e8cdd57aa76c76963
parent 9a6848d4a1bfa8bc90f274a7a82963b89ada88d6
parent e9ba0106dbefd0da5736ee604974aae7e0e03085
author 田中たろう <tanaka.t@example.com> 
committer 田中たろう <tanaka.t@example.com> 
```

- 上記の数行のテキストデータが、コミットオブジェクト。

- ポイントは、ソースコードや画像などが一切含まれないメタデータであること。

- 普段``` git log```で調べているのは、この軽量なメタデータのみ。だから一瞬で履歴を遡ることができる！

### git revert

- 特定のコミットを打ち消す。``` git revert <コミットID>```

- プラスしたコードがマイナスになり、マイナスしたコードがプラスになることで結果的にコミットを無かったことにする。取り消す、ではなく打ち消す。

- 新しく打ち消しのコミットを積むことになるので、コミットの履歴を改変する心配はない。

- ``` git reset```で操作を確実に行えるなら使う必要はないが、押さえておく。

### HEADとは

「作業しているブランチを参照するもの」。


### HEADとブランチの関係性


- HEADの情報の場所→.gitディレクトリ
```
$cat .git/HEAD

ref: .git/refs/heads/develop
```
上記で、現在HEADがdevelopブランチを参照しているのがわかる。そこでrefsの中身を確認する。

```
cat .git/refs/heads/develop

90324d9a01cc57aa1c544fdfa844a520f121c5f3
```

90324d~....のコミットIDは、```git log```でみた最新のコミットIDと同じ。


- 要するに、** HEADがブランチを参照し、ブランチは最新のコミットを参照している。**

結果的にHEADがそのブランチの最新のコミットを参照していることになる。

- ちなみに、mainブランチに移動して``` cat .git/refs/heads/main```をすると、mainブランチの最新のコミットIDが確認できるので試してみると面白い。



# 終わりに

Gitオブジェクトの概念は今まであまり意識したことがなかったので、新鮮でした。

また、.gitディレクトリ配下でどのようにコードの変更を管理しているか、というのも今までブラックボックスだったことがわかりました。

開発でスムーズにGit操作ができることと、それ以上にGitの概念理解を深めていく重要性を感じた学習でした。


参考：

[https://www.r-staffing.co.jp/engineer/entry/20190719_1:embed:cite]


[『Git入門　コマンドライン演習80』](https://www.amazon.co.jp/%E5%AE%9F%E5%8B%99%E3%83%AC%E3%83%99%E3%83%AB%E3%81%A7%E3%82%8F%E3%81%8B%E3%82%8B-%E4%BD%BF%E3%81%84%E3%81%93%E3%81%AA%E3%81%9B%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8BGit%E5%85%A5%E9%96%80%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E6%BC%94%E7%BF%9280-%E4%BA%95%E4%B8%8A%E9%A1%A7%E5%9F%BA/dp/4798066338)
